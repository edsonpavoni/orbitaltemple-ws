---
import Base from "../layouts/BaseLayout.astro";
import HomeRitualButton from "../components/HomeRitualButton";
import RitualButtonPlaceholder from "../components/RitualButtonPlaceholder.astro";
import HomeHero from "../components/HomeHero";
import HomeCTA from "../components/HomeCTA";
import "../styles/ritual-button.css";
// import YetAnotherTemple from "../components/YetAnotherTemple.astro";
---
<Base title="Orbital Temple">

  <!-- First Fold: Hero Section with Satellite Background -->
  <section style="position: relative; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 1.5rem 1.5rem 36px 1.5rem;">
    <!-- Satellite Background Video -->
    <div style="position: absolute; inset: 0; z-index: 0;">
      <!-- Mobile Video -->
      <video
        autoplay
        loop
        muted
        playsinline
        poster="/videos/mobile_placeholder.webp"
        style="width: 100%; height: 100%; object-fit: cover; opacity: 0.6; display: block;"
        class="mobile-video">
        <source src="/videos/mobile.webm" type="video/webm" />
        <source src="/videos/mobile_h264.mp4" type="video/mp4" />
      </video>

      <!-- Desktop Video -->
      <video
        autoplay
        loop
        muted
        playsinline
        poster="/videos/desk_placeholder.webp"
        style="width: 100%; height: 100%; object-fit: cover; opacity: 0.6; display: none;"
        class="desktop-video">
        <source src="/videos/desk_h264.webm" type="video/webm" />
        <source src="/videos/desk_h264.mp4" type="video/mp4" />
      </video>
    </div>

    <!-- Top spacer for vertical centering -->
    <div style="flex: 1; min-height: 2rem;"></div>

    <!-- Hero Content (centered) -->
    <div style="text-align: center; max-width: 600px; position: relative; z-index: 1;">
      <HomeHero client:only="react" />
    </div>

    <!-- Ritual Button (centered in remaining space) -->
    <div style="flex: 1; display: flex; align-items: center; justify-content: center; position: relative; z-index: 1; min-height: 2rem;">
      <a href="/send-a-name" id="ritual-button-link" style="display: inline-block; text-decoration: none; color: inherit;" aria-label="Enter the ritual - Send a name to the Orbital Temple">
        <div id="ritual-button-container" style="position: relative; display: flex; justify-content: center; margin: 0;">
          <!-- Immediate placeholder (no JS needed) -->
          <div id="ritual-placeholder-wrapper">
            <RitualButtonPlaceholder size={123} label="ritual" />
          </div>

          <!-- Enhanced version (loads after page is interactive) -->
          <div id="ritual-button-enhanced" style="position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.4s ease-in; pointer-events: none;">
            <HomeRitualButton client:only="react" />
          </div>
        </div>
      </a>
    </div>

    <script>
      // Progressive enhancement: swap placeholder with interactive version when loaded
      function initRitualButton() {
        const placeholder = document.getElementById('ritual-placeholder-wrapper');
        const enhanced = document.getElementById('ritual-button-enhanced');

        if (!placeholder || !enhanced) return;

        // Wait for the React component to be ready
        const checkInterval = setInterval(() => {
          const component = enhanced.querySelector('.ritual-wrap-v6');
          if (component) {
            // Component is ready, swap
            enhanced.style.opacity = '1';
            enhanced.style.pointerEvents = 'auto';
            placeholder.style.opacity = '0';
            placeholder.style.pointerEvents = 'none';

            clearInterval(checkInterval);
          }
        }, 100);

        // Cleanup after 5 seconds
        setTimeout(() => clearInterval(checkInterval), 5000);
      }

      // Run on page load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initRitualButton);
      } else {
        initRitualButton();
      }

      // Run on Astro page transitions
      document.addEventListener('astro:page-load', initRitualButton);
    </script>

    <!-- Bottom link with 36px margin (from padding) -->
    <div style="position: relative; z-index: 1; width: 100%;">
      <HomeCTA client:only="react" />
    </div>
  </section>

  <!-- Second Fold: Dome Image -->
  <section id="dome" style="position: relative; width: 100%; background-color: var(--color-ot-dark);">
    <picture>
      <source media="(min-width: 768px)" srcset="/UI/dome_large.webp" />
      <img src="/UI/dome.webp" alt="Dome" style="width: 100%; height: auto; display: block;" />
    </picture>
  </section>

  <!-- Third Section: Manifesto -->
  <section style="position: relative; background-color: var(--color-ot-dark);">
    <div style="display: flex; flex-direction: column; gap: 1.5rem; padding: 80px 24px; max-width: 768px; margin: 0 auto;">

      <h2 class="section-heading" style="color: var(--color-ot-gold100); margin: 0 0 1rem 0; letter-spacing: -0.01em;">Yet, Another Temple?</h2>

      <p class="body-text" style="color: var(--color-ot-gold100);">
      In the beginning, there was a cave.<br>
      "Let there be light," said the torch.<br>
      And inside that cave, humans made art.<br>
      They painted the animals they would hunt;<br>
      they painted their desired future,<br>
      not to decorate but to invoke.<br>
      They danced,<br>
      and the cave became a temple.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">
        Humans build temples.<br>
      People from different lands, who have never met, build temples.<br>
      When you look at a temple, you see a mirror,<br>
      a reflection of who we were and who we wished to become.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Rationality built the Parthenon in Athens.<br>
      Unification built the Kaaba in Mecca.<br>
      Purity built the Kashi Vishwanath Temple on the Ganges.<br>
      Endurance maintains the Western Wall in Jerusalem.<br>
      Enlightenment built the Shwedagon Pagoda in Yangon.<br>
      And ancestral continuity builds the Candomblé terreiros in Salvador.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Everything in a temple is an invocation.<br>
      It can be tall as a cathedral that makes you feel small,<br> 
      dark as the hollow of a tree that makes you look within, <br>
      bare as a desert that silences distraction,<br>
      or sumptuous with gold that gives you hope.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Temples are clues to our spiritual nature,<br>
      guides toward a sacred place within,<br>
      where we might unlock the creative power<br>
      of our deeper unconscious selves.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">The artist, like the priest, the sage, or the shaman,<br> takes part in this collective building.<br>
      Like they once did in the cave,<br>
      their work is to give body to values,<br>
      to lend their hands to what wants to be born,<br> to serve what must exist.<br>
      They are servants, building, part by part,<br>
      what humanity must physically manifest.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">But not all parts of a temple are created equal.<br>
      The most consequential part of any temple<br>
      will always be its door.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">The doors of a temple hold their power to cut,<br> to draw a wound between who can enter and who cannot.<br>
      That is how a temple becomes a sword.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">And this sword has been used for centuries,<br>
      against the color of skin,<br>
      the place of birth,<br>
      the people one loves,<br>
      the clothes they wear,<br>
      and the choices they make with their own bodies.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Even temples that claim to welcome all<br>
      stand inside nations that do not.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">An open Buddhist temple in Nepal<br>
      cannot be visited by everyone who longs to enter.<br>
      Borders, visas, and politics decide who may pray.<br>
      A church in China, a mosque in Jerusalem,<br>
      a shrine in Tibet,<br>
      all stand behind invisible walls.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">No temple can be radically inclusive.<br>
      There is no place on Earth<br>
      that can hold the universal sacred.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Yet all peoples who ever lived built temples,<br>
      proof that something sacred unites us.<br>
      Something that sees no borders.<br>
      Something that deserves a place of its own.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Where could we build such a temple?<br>
      Where no walls can reach,<br>
      no nation can claim,<br>
      no religion can rule.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Space.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Yes, this place is space.<br>
      Even if a few privileged now try to claim it,<br>
      and even as space endures its cultural crisis,<br>
      its power in our imagination is ancient.<br>
      It is the infinite above, the firmament, the celestial vault, the heavens,<br>
      the oldest commons we share.<br>
      Space carries an ancestral mandate<br>
      to unite us.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">
        There may exist a place beyond every border,<br> for all humans and all sentient beings,<br> a temple to imagine ourselves as one group,<br> guided by values we have yet to create.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">This is an invitation to a new kind of ritual.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">An artistic invitation<br> to create a temple in space,<br> a temple built where no walls can reach.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">Think of a life that should be remembered.<br>
      Type their name here.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">And we will hold it.<br>
      When the Orbital Temple aligns with our antennas on Earth,<br>
      the name will rise.<br>
      The satellite will store it in its memory<br>
      and send a message to you:<br>
      "Today, at this hour, the name you sent ascended, and there it remains."</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">The Orbital Temple is an artwork,<br>
      and a satellite.<br>
      And although it has "temple" in its name,<br>
      it becomes a temple only if<br>
      you decide to see it as one.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">It exists now as an evocation,<br>
      like the one made by the artists <br>
      in that primordial cave.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">And we are still in a cave,<br>
      the vast darkness of space,<br>
      where Earth is the torch,<br>
      the only place we know<br>
      consciousness exists for sure.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">The artist is still working,<br>
      people are still dancing,<br>
      serving the same impulse as our ancestors,<br>
      painting, sculpting, designing our desired future,<br>
      not to decorate but to invoke,<br>
      so a new temple can be born.</p>

      <p class="body-text" style="color: var(--color-ot-gold100);">And yes,<br>
      you are invited to dance.</p>

    </div>
  </section>

  <!-- Footer: Credits -->
  <footer style="background-color: var(--color-ot-dark); padding: 4rem 1.5rem 2rem 1.5rem;">
    <p style="font-size: var(--text-body-sm); line-height: var(--text-body-sm-lh); color: var(--color-ot-light); opacity: 0.6; max-width: 720px; margin: 0 auto; text-align: left;">
      Orbital Temple is an artwork by Edson Pavoni, created in collaboration with Pedro Kaled, João Pedro Polito, Victor Baptista & João Victor Alves, André Biagioni, VK, Jonathan Querubina, Guilherme Bullejos, Eduardo Dias, Roberta Savian Rosa, Clara Marques, Sathi Roy, and all those who continue to send names to this temple.
    </p>
  </footer>

  <!-- Responsive Video Styles -->
  <style>
    /* Mobile: show mobile video, hide desktop video */
    .mobile-video {
      display: block !important;
    }
    .desktop-video {
      display: none !important;
    }

    /* Desktop: hide mobile video, show desktop video */
    @media (min-width: 768px) {
      .mobile-video {
        display: none !important;
      }
      .desktop-video {
        display: block !important;
      }
    }
  </style>

</Base>